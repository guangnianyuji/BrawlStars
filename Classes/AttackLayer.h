#ifndef __ATTACK_LAYER__
#define __ATTACK_LAYER__

#include "cocos2d.h"


class AttackLayer:public cocos2d::Layer
{
	friend class FightControllerLayer;
public:
	static AttackLayer* create(cocos2d::Vec2 position1,cocos2d::Vec2 position2);

	virtual bool init() override;

	/* 设置绝招技能摇杆为不可用状态 */
	void setAceRockerDisable(); 

	/* 设置绝招技能摇杆为可用状态 */
	void setAceRockerEnable();

	/* 设置普攻技能摇杆为可用状态 */
	void setNormalAttackRockerEnable();

	/* 设置普攻技能摇杆为不可用状态 */
	void setNormalAttackRockerDisable();

	/* 判断人物是否在进行普通攻击 */
	bool isAttackTime() const;

	/* 判断人物是否在放大招 */
	bool isAceTime() const;

	void setAttackState(bool state);

	/* 得到普攻摇杆方向角 */
	float getNormalRockerAngle() const;

	/* 得到绝招摇杆方向角 */
	float getAceRockerAngle() const;

private:

	/* 加入普通攻击摇杆 */
	void initNormalAttackRocker();

	/* 加入绝招摇杆 */
	void initAceRocker();

	cocos2d::Vec2 normalAttackRockerBGPosition;

	cocos2d::Vec2 normalAttackRockerPosition;

	cocos2d::Vec2 aceRockerBGPosition;

	cocos2d::Vec2 aceRockerPosition;

	cocos2d::Sprite* normalAttackRockerBG;

	cocos2d::Sprite* normalAttackRocker;

	cocos2d::Sprite*  aceRockerBG;

	cocos2d::Sprite* aceRocker;

	/* 操作摇杆时，显示的预发射路径*/
	cocos2d::Sprite* Track;

	/* 摇杆的半径 */
	float RockerBackgroundRadius;

	/* 松开摇杆前普通攻击摇杆的方向角 */
	float normalAttackRockerAngle;

	/* 松开摇杆前绝招摇杆的方向角 */
	float aceRockerAngle;


	bool _isAttackTime = false;

	bool _isAceTime = false;

	std::string _characterName = "Nothing";
};

inline bool AttackLayer::isAceTime() const { return _isAceTime; }

inline bool AttackLayer::isAttackTime() const { return _isAttackTime; }

inline void AttackLayer::setAttackState(bool state) { _isAttackTime = state; }

inline float AttackLayer::getAceRockerAngle() const { return aceRockerAngle; }

inline float AttackLayer::getNormalRockerAngle() const { return normalAttackRockerAngle; }
#endif
